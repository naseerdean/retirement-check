<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Sterling Income Strategy</title>

<style>
body{
 margin:0;
 font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Arial,sans-serif;
 background:linear-gradient(135deg,#0b1320,#162a4a);
 color:white;
}
.wrap{
 max-width:700px;
 margin:auto;
 padding:20px;
}
h1{
 font-family:Georgia,serif;
 font-size:32px;
 background:linear-gradient(45deg,#d4af37,#f4d77a);
 -webkit-background-clip:text;
 -webkit-text-fill-color:transparent;
}
.card{
 background:rgba(255,255,255,0.06);
 padding:18px;
 border-radius:16px;
 margin-top:15px;
}
input,select{
 width:100%;
 padding:12px;
 border-radius:10px;
 border:none;
 margin-top:6px;
 margin-bottom:12px;
 font-size:16px;
}
button{
 width:100%;
 padding:12px;
 border:none;
 border-radius:10px;
 font-weight:bold;
 margin-top:10px;
 cursor:pointer;
}
.primary{
 background:linear-gradient(45deg,#d4af37,#f4d77a);
 color:black;
}
.secondary{
 background:#223553;
 color:white;
}
.hidden{display:none;}
.kpis{
 display:grid;
 grid-template-columns:1fr 1fr;
 gap:10px;
}
@media(max-width:600px){
 .kpis{grid-template-columns:1fr;}
}
.kpi{
 background:rgba(255,255,255,0.05);
 padding:12px;
 border-radius:12px;
}
.kpi b{
 display:block;
 font-size:12px;
 color:#ccc;
}
.kpi span{
 font-size:20px;
 font-weight:bold;
}
canvas{
 background:white;
 border-radius:12px;
 margin-top:14px;
}
</style>
</head>

<body>
<div class="wrap">

<h1>Sterling Income Strategy</h1>

<div class="card" id="step1">
<b>Why this matters</b><br><br>
Retirement income planning requires structure, not guesswork.
<button class="primary" onclick="goStep(2)">Begin</button>
</div>

<div class="card hidden" id="step2">
<b>Your Inputs</b>

<label>Capital (£)</label>
<input id="capital" value="1000000">

<label>Your Age</label>
<input id="age" value="67">

<label>Income Required Now (£)</label>
<input id="inc1" value="60000">

<label>Guaranteed Income (£)</label>
<input id="guar" value="11500">

<label>Later-Life Income (£)</label>
<input id="inc2" value="80000">

<label>Years Until Phase Two</label>
<input id="phase1y" value="8">

<label>Return (%)</label>
<input id="ret" value="5">

<label>Inflation (%)</label>
<input id="inf" value="3">

<label>Risk Preference</label>
<select id="risk">
<option value="low">Stability First</option>
<option value="moderate" selected>Balanced</option>
<option value="higher">Income First</option>
</select>

<button class="primary" onclick="buildModel()">View Recommendation</button>
<button class="secondary" onclick="goStep(1)">Back</button>
</div>

<div class="card hidden" id="step3">
<b>Your Recommendation</b>

<div class="kpis">
<div class="kpi"><b>Model</b><span id="modelOut"></span></div>
<div class="kpi"><b>Net Yield</b><span id="yieldOut"></span></div>
<div class="kpi"><b>Net Income</b><span id="incomeOut"></span></div>
<div class="kpi"><b>Age Depletion</b><span id="depleteOut"></span></div>
</div>

<div id="warning" style="margin-top:10px;"></div>

<canvas id="chart" width="600" height="300"></canvas>

<button class="primary" onclick="goStep(4)">Accept</button>
<button class="secondary" onclick="goStep(2)">Edit</button>
</div>

<div class="card hidden" id="step4">
<b>Confirm</b>

<form action="https://formspree.io/f/mojnewoq" method="POST">
<input name="name" placeholder="Your Name" required>
<input name="email" type="email" placeholder="Your Email" required>
<input type="hidden" name="proposal" id="proposalHidden">
<button class="primary" type="submit">Submit</button>
</form>

<button class="secondary" onclick="goStep(3)">Back</button>
</div>

</div>

<script>

const fee = 0.25;
const proposalA = {name:"Proposal A", yield:5.08};
const proposalB = {name:"Proposal B", yield:6.01};

function goStep(step){
["step1","step2","step3","step4"].forEach((id,i)=>{
 document.getElementById(id).classList.toggle("hidden", i !== step-1);
});
}

function buildModel(){

let cap = Number(document.getElementById("capital").value);
let ageVal = Number(document.getElementById("age").value);
let inc1 = Number(document.getElementById("inc1").value);
let guar = Number(document.getElementById("guar").value);
let inc2 = Number(document.getElementById("inc2").value);
let phaseYears = Number(document.getElementById("phase1y").value);
let ret = Number(document.getElementById("ret").value)/100;
let inf = Number(document.getElementById("inf").value)/100;
let risk = document.getElementById("risk").value;

let model = (risk==="higher") ? proposalB : proposalA;

let netYield = model.yield - fee;
let netIncome = cap * netYield / 100;

document.getElementById("modelOut").innerText = model.name;
document.getElementById("yieldOut").innerText = netYield.toFixed(2)+"%";
document.getElementById("incomeOut").innerText = "£"+Math.round(netIncome).toLocaleString();
document.getElementById("proposalHidden").value = model.name;

// Projection
let bal = cap;
let depletionAge = "40+ yrs";

for(let y=0; y<40; y++){
 let draw = (y<phaseYears ? inc1-guar : inc2-guar);
 draw = draw * Math.pow(1+inf,y);
 bal = bal*(1+ret) - draw;
 if(bal<=0){
  depletionAge = ageVal + y;
  break;
 }
}

document.getElementById("depleteOut").innerText = depletionAge;

if(depletionAge !== "40+ yrs"){
 document.getElementById("warning").innerHTML =
 "<div style='background:#5a1f2b;padding:10px;border-radius:8px;'>⚠ Plan may deplete under assumptions.</div>";
}else{
 document.getElementById("warning").innerHTML =
 "<div style='background:#1f3f2b;padding:10px;border-radius:8px;'>✓ Appears sustainable under assumptions.</div>";
}

// Chart
let ctx = document.getElementById("chart").getContext("2d");
ctx.clearRect(0,0,600,300);
ctx.beginPath();
ctx.moveTo(20,250);
ctx.lineTo(580,80);
ctx.strokeStyle="#d4af37";
ctx.lineWidth=3;
ctx.stroke();

goStep(3);
}

goStep(1);

</script>

</body>
</html>
